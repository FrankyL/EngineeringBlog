<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>IoT Dust Sensor Revisited: SAMD21, SERCOM &amp;amp; PCB - Franky&#x27;s Engineering Works</title><meta name="description" content="This is an old project, basically a private continuation of a project at a research engineer stint. ( SIT, back in 2021 I think? ) The original project wants a sensor that can dual use 4G and Wi-Fi to publish data onto Thingspeak. Honestly, 4G&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://frankyl.github.io/EngineeringBlog/iot-dust-sensor-revisited-samd21-sercom-andamp-pcb.html"><link rel="alternate" type="application/atom+xml" href="https://frankyl.github.io/EngineeringBlog/feed.xml" title="Franky&#x27;s Engineering Works - RSS"><link rel="alternate" type="application/json" href="https://frankyl.github.io/EngineeringBlog/feed.json" title="Franky&#x27;s Engineering Works - JSON"><meta property="og:title" content="IoT Dust Sensor Revisited: SAMD21, SERCOM &amp; PCB"><meta property="og:site_name" content="Franky's Engineering Works"><meta property="og:description" content="This is an old project, basically a private continuation of a project at a research engineer stint. ( SIT, back in 2021 I think? ) The original project wants a sensor that can dual use 4G and Wi-Fi to publish data onto Thingspeak. Honestly, 4G&hellip;"><meta property="og:url" content="https://frankyl.github.io/EngineeringBlog/iot-dust-sensor-revisited-samd21-sercom-andamp-pcb.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://frankyl.github.io/EngineeringBlog/assets/css/style.css?v=fafdaaaf21e0ae9678e49280e0b8d62b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://frankyl.github.io/EngineeringBlog/iot-dust-sensor-revisited-samd21-sercom-andamp-pcb.html"},"headline":"IoT Dust Sensor Revisited: SAMD21, SERCOM &amp; PCB","datePublished":"2025-06-28T23:53+08:00","dateModified":"2025-09-09T16:24+08:00","description":"This is an old project, basically a private continuation of a project at a research engineer stint. ( SIT, back in 2021 I think? ) The original project wants a sensor that can dual use 4G and Wi-Fi to publish data onto Thingspeak. Honestly, 4G&hellip;","author":{"@type":"Person","name":"Franky Laurentis","url":"https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/"},"publisher":{"@type":"Organization","name":"Franky Laurentis"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><header class="top js-header"><a class="logo" href="https://frankyl.github.io/EngineeringBlog/">Franky&#x27;s Engineering Works</a></header><main class="post"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>IoT Dust Sensor Revisited: SAMD21, SERCOM &amp;amp; PCB</h1><div class="feed__meta content__meta"><a href="https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/" class="feed__author">Franky Laurentis</a> <time datetime="2025-06-28T23:53" class="feed__date">June 28, 2025</time></div></div></header></div><div class="entry-wrapper content__entry"><p></p><h2 class="wp-block-heading">Background on the original unit</h2><p></p><p></p><p>This is an old project, basically a <strong>private </strong>continuation of a project at a research engineer stint. ( SIT, back in 2021 I think? )</p><p></p><p></p><p>The original project wants a sensor that can dual use 4G and Wi-Fi to publish data onto Thingspeak. Honestly, 4G is a hassle to use cuz the module itself is huge and a 4G SIM card is an all around pain to acquire. First time I tried using Arduino Nano 33 IOT, quite a neat project to use, especially with OTA Arduino. Although I would have to say the module is more limited than ESP32 if we have lots of peripherals.</p><p></p><p></p><p>It uses this "SERCOM" thing (SAMD21, the microcontroller on the Arduino Nano 33 can reconfigure itself to use different modes of the same pins) for communication protocols, there's like 6 of them, 1 is connected by default to Wi-Fi, so 5 left, 1 for SD card, 1 for BME280, 1 for 4G module, 2 Dust Sensors.</p><p></p><p></p><p>Honestly, the lack of software serial support ala older Arduinos and ESP32 is baffling, for dust sensors, we don't even need high speed serial, just 9600 baud is enough but it's not doable here and we need to do backflips to reconfigure the SERCOM.</p><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/sit-dust-sensor-final-pcb.png?w=985" data-is-external-image="true"></p><p></p><p></p><p></p><p></p><blockquote class="wp-block-quote"><p>Above is the PCB used in the research stint. Much credit to Prof. Kiew who gave me pointers on how to use copper area and also via signal grounding. I used to treat PCB as "thinner breadboards that can do SMD components" prior to this.</p><p></p><p></p><p>Also taught me the "place 2 squares on PCB right next to each other, then just solder for selection" trick. Pretty neat</p><p></p><p></p><p>Also got a pretty good lesson at making sure I give a value at the "spoke width" setting on the Copper Area in EasyEDA. No spoke width means the GND is completely fused to the Copper Area and makes it harder to solder cuz the heat get spread around very quickly.</p><p></p></blockquote><p></p><p></p><p>Hilariously enough, this one is actually the 'V3' back then, V2 is developed by a student and I actually managed to find where he got the idea for the components from (he chose <strong>Teensy 3.2</strong> (I can't figure out where to buy those even back in 2021), I personally prefer <strong>ESP32</strong> (cheap and easy to get), Prof prefers <strong>Arduino</strong> ( more expensive but very standardized and high quality), that's an awfully specific choice). Looks like he followed a dust sensor tutorial online, but at least he got it working before I joined, so I didnâ€™t have to spend too many braincells reverse-engineering it.</p><p></p><p></p><h2 class="wp-block-heading">Quick spin-off PCB for student</h2><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/pcb2.png?w=828" data-is-external-image="true"></p><p></p><p></p><p></p><p></p><blockquote class="wp-block-quote"><p>I think this one above is a "spin-off variant" for one of Prof. Kiew's student's FYP. I vaguely remember the double microcontroller set up. I think he uses the design for the next spin-off project within SIT.</p><p></p><p></p><p>The very first design before this didn't really work out, can't really help it though, I think its her first time designing a PCB and is confused with how it works. I ended up remaking it anyway after she submitted it and graduated, oh well. Hopefully it was still a good learning experience for her, first boards are almost always scuffed, no shame in that</p><p></p></blockquote><p></p><p></p><h2 class="wp-block-heading">The private build I made (Ver. Me V1)</h2><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/photo_6269073465587910102_y.jpg?w=598" data-is-external-image="true"></p><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/photo_6269073465587910101_y.jpg?w=518" data-is-external-image="true"></p><p></p><p></p><figure class="wp-block-gallery has-nested-images columns-default is-cropped"><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/photo_6269073465587910103_y.jpg?w=958" data-is-external-image="true"></figure><p></p><p></p><p></p><p></p><blockquote class="wp-block-quote"><p>This is sensor that I dug out from my stash, the components are all the same except the lack of 4G module. Changed the BME280 to BME680 (forgot why, maybe more features?). I also remembered changing one of the dust sensor too, SEN54 is a more advanced dust sensor compared to the one used in the SIT V3.</p></blockquote><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/screenshot-268-1.png?w=1024" data-is-external-image="true"></p><p></p><p></p><p></p><p></p><blockquote class="wp-block-quote"><p>Schematic here, used my favorite ESP32 instead of the original Arduino Nano 33 IoT, everything else is pretty straight forward. Power is mostly USB, I make a socket for USB cable in the casing to power the ESP32, the rest just take power from either the 5V USB or 3.3V ESP32 regulator.</p></blockquote><p><img loading="lazy" src="https://web.archive.org/web/20250629051423im_/https://frankylau5.wordpress.com/wp-content/uploads/2025/06/privatedustsensorbuild1.png?w=710" data-is-external-image="true"></p><p></p><p></p><p></p><p></p><blockquote class="wp-block-quote"><p>This is the V1 PCB, I tried to cram everything as much as possible, there's also an RGB LED to do a greater variety of indicator lighting.</p><p></p></blockquote><p></p><p></p><p>Maybe I should add a screen and battery to a V2. Or maybe I can also make a central IOT hub that can connect to multiple sensors and visualize the data streams in multiple locations, that would be interesting. Probably gonna move on from ThingSpeak used in the SIT V3, 20s update (free account) is way too laggy and the transmission can be quite hit or miss.</p><p></p></div><footer class="content__footer"><div class="entry-wrapper"><p class="content__updated">This article was updated on September 9, 2025</p><div class="content__actions"><ul class="content__tag"><li><a href="https://frankyl.github.io/EngineeringBlog/tags/arduino-nano-33-iot/">Arduino Nano 33 IoT</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/custom-pcb-for-iot-projects/">Custom PCB for IoT Projects</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/diy-air-quality-monitor/">DIY Air Quality Monitor</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/diy-iot-sensor-with-pcb-design/">DIY IoT Sensor with PCB Design</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/environmental-iot-sensors-diy/">Environmental IoT Sensors DIY</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/esp32-vs-arduino-iot-boards/">ESP32 vs Arduino IoT Boards</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/iot-dust-sensor-project/">IoT Dust Sensor Project</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/low-cost-iot-sensors/">Low Cost IoT Sensors</a></li><li><a href="https://frankyl.github.io/EngineeringBlog/tags/sercom-samd21-serial-communication/">SERCOM SAMD21 Serial Communication</a></li></ul><div class="content__share"><button class="btn--icon content__share-button js-content__share-button"><svg width="20" height="20" aria-hidden="true"><use xlink:href="https://frankyl.github.io/EngineeringBlog/assets/svg/svg-map.svg#share"></use></svg> <span>Share It</span></button><div class="content__share-popup js-content__share-popup"></div></div></div><div class="content__bio bio"><div><h3 class="h4 bio__name"><a href="https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/" rel="author">Franky Laurentis</a></h3></div></div></div><nav class="content__nav"><div class="wrapper"><div class="content__nav-inner"><div class="content__nav-prev"><a href="https://frankyl.github.io/EngineeringBlog/tank-tread-type-robotcrawler-refurbishing-and-perfecting-a-really-old-3d-printed-build-android-ble-remote-controller.html" class="content__nav-link" rel="prev"><div><span>Previous</span> Tank-tread type robot/crawler(?) - Refurbishing and perfecting a really old 3D printed build + Android BLE Remote Controller</div></a></div><div class="content__nav-next"><a href="https://frankyl.github.io/EngineeringBlog/massive-3d-printed-7-segment-led-clock.html" class="content__nav-link" rel="next"><div><span>Next</span> Massive 3D-Printed 7-Segment LED Clock</div></a></div></div></div></nav></footer></article><div class="content__related related"><div class="wrapper"><h2 class="h4 related__title">You should also read:</h2><article class="feed__item feed__item--centered"><div class="feed__content"><header><div class="feed__meta"><a href="https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/" class="feed__author">Franky Laurentis</a> <time datetime="2025-06-08T17:09" class="feed__date">June 8, 2025</time></div><h3 class="feed__title"><a href="https://frankyl.github.io/EngineeringBlog/esp32-based-washing-machine-sensor.html">ESP32-based washing machine sensor</a></h3></header><p>Relatively simple sensor Aim is to create an IoT sensor that can measure the vibration and temperature of a washing machine. So roughly the idea for the overall circuit is: ESP32 read piezo for vibration and a thermistor with potential divider for the temperature. Data&hellip;</p><a href="https://frankyl.github.io/EngineeringBlog/esp32-based-washing-machine-sensor.html" class="readmore feed__readmore">Continue reading...</a></div></article><article class="feed__item feed__item--centered"><div class="feed__content"><header><div class="feed__meta"><a href="https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/" class="feed__author">Franky Laurentis</a> <time datetime="2025-03-25T16:49" class="feed__date">March 25, 2025</time></div><h3 class="feed__title"><a href="https://frankyl.github.io/EngineeringBlog/nus-module-project-andamp-review-me5517-nature-inspired-materials-and-design-2425-sem1.html">[NUS Module Project &amp;amp; Review] ME5517 Nature-Inspired Materials and Design (2425-SEM1)</a></h3></header><p>Module name described most of what it's all about. Topics are: Structural Design Elements, Layered Structures, Adhesives, Structural Colors, Self-healing materials, Super-wettability, Biological Elastomers and Circular Economy. There is a guest lecturer too in my semester, quite a chill guy. If I remember correctly, the&hellip;</p><a href="https://frankyl.github.io/EngineeringBlog/nus-module-project-andamp-review-me5517-nature-inspired-materials-and-design-2425-sem1.html" class="readmore feed__readmore">Continue reading...</a></div></article><article class="feed__item feed__item--centered"><div class="feed__content"><header><div class="feed__meta"><a href="https://frankyl.github.io/EngineeringBlog/authors/franky-laurentis/" class="feed__author">Franky Laurentis</a> <time datetime="2025-03-24T00:07" class="feed__date">March 24, 2025</time></div><h3 class="feed__title"><a href="https://frankyl.github.io/EngineeringBlog/nus-module-project-andamp-review-me5415-advanced-soft-robotics-2324-sem2.html">[NUS Module Project &amp;amp; Review] ME5415 Advanced Soft Robotics (2324-SEM2)</a></h3></header><p>Soft robotics is a pretty good name for the module and what to expect. One of the better ME M.Sc. modules I have taken More of a conceptual module to share more about soft robotics, how it works and how it is being applied industrially/in&hellip;</p><a href="https://frankyl.github.io/EngineeringBlog/nus-module-project-andamp-review-me5415-advanced-soft-robotics-2324-sem2.html" class="readmore feed__readmore">Continue reading...</a></div></article></div></div></main><footer class="footer footer--glued"><div class="wrapper"><div class="footer__copyright"><p>Powered by Publii</p></div><button id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://frankyl.github.io/EngineeringBlog/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://frankyl.github.io/EngineeringBlog/assets/js/scripts.min.js?v=700105c316933a8202041b6415abb233"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>